use crate::input::{Input, MouseButton};
use crate::screen::Screen;
use crate::state_machine::State;
use rand::{thread_rng, Rng};
use crate::drawing::{draw_ascii, draw_question};
use crate::states::main_state::MainState;
use crate::states::transition_state::TransitionState;

pub struct Day24State {
    title_text: String,
}

impl Day24State {
    pub fn new() -> Self {
        let title_text = "Behold! Our Father Christmas!".to_string();
        Day24State { title_text }
    }
}

impl State for Day24State {

    fn update(&mut self, screen: &mut Screen, input: &mut Input, dt: f64) -> Option<Box<dyn State>> {

        self.phase = (self.phase + dt) % 2.0;
        draw_ascii(screen, FATHER_CHRISTMAS, 12, screen.height() - 26);

        draw_text_box(
            screen,
            screen.width(),
            screen.height(),
            explanation1,
            0,
            -16,
            (0, 0),
            false,
        );

        if correct {
            return Some(Box::new(TransitionState::new(Box::new(MainState::new()), None)));
        }

        None
    }

    fn exit(&mut self, screen: &mut Screen, input: &mut Input) {
    }
}

pub const FATHER_CHRISTMAS: &str = r#"
=+++++====+++++++**++++++=+*#####*+#%%%%##%%%%##%###*****++*#%**#######*##%%%#+=+++**++****+***#####
*+++===+++++++===+++*###*#%###**#####%#%##%#%%%%###%%%#****##%##%%%%%####%%**++*+#####***+++#%##*###
###+====+****+*#**++++***#%%%%######***#*#%%%%#%%#%@%%%##*****##%%%%####%#%#*+*####***#####+++*##%##
==++====++***+**+=+--=++***%%%%%%%%%##*+*#%%%%%%%##%%*++#%%*#%%##**#####%%%%%%%##**####%###*+++++*##
#+=++====+++*#*++*####+-+*#*#%%%%#+***#*##%##**#%%*+*%%%**+*%%%%%###%%%%%%%%#%%%##%#%#%%%%%###**=+*#
*+*+=====+*****++**##%##%*+*#**+=+%%#***=#@%%%*+#%%@#**+****++**%%%##%@@@%%**#%%#***###%%##%%###***#
#***+==--=====++++*****#%%#=+#####******#*+%%%*==*#%%*#***+**##**######%%%%###%%%%#++*##+#%#*+*+*#%%
%*++++=++#+-+==+====-=*####**+=+**+#*#%%#+*##%@@%###****+###***##%%%%%#%%%*#####%%#**##%#*##*#*+=+**
**+-===+=+##+#+-+++===***+********##**###++==+#%%%#*#%%#*+++*****#**%%%%##*=#%@@*+**##%%@@@%***%##*=
+=+++**++*+=**#%+=++==*==++==+#****#+=++*##*##**+=+==+==-==::=*+*#%%%%%%%##*=+*##**#***#%@@@@%#%%%%%
#+=-+*++*#@%##***+==+==++*+*+*+++**#####++++*--=-=+===+---------+***++*#%%#*##*++***+*%%**%%#***#%%%
##*#**++++***#####*+++===+=*+****+########*--*===*=---=-----::----+*==+***####***=+++***%#%%%***##*#
-====-+**########*++++=++#***+##*++*#%#*#=-::=++++*#*+-=-:=--::-::-++**==***#**######%#####%#%##****
+===++=+*#*###*+#++++####+*+**++++**+##:--+=++--*##%#*=*%#%**-:::--:=***#*###*##*##%%########%%#####
+=+=***+=**%#%#==++**++=++###**#=+++++=:-=+**#*:-+***+**#%#@%#+-::--=-##%*+*#####****#%#*#%%@@%%%@%%
*+*+++###*#####%%#####*+=#*++*=*==*=+==-+-##+--------======*#%#+-=+-=-+*+**#+##*####*+*##%%%@@%%@@##
=+*+#+*#++***#*#%##%%%%*+++==-+*#*##=--+=-=---::::::::::::::-+##=+-=--=#@%%#*%%%@@@%#***#%%%%%%%*==-
+*##**+*##**+*######%#@%#%#+***###*#===-*+-----::::::::::::::-=+#+++=-:++*+%@%%@@@@@%###%%%@%%%#=+*+
+***++**##**#%##*+*++*+***%%###*#%+#*=+++==------::::::::::::::-+*+=---=++***++#%@@@@%%@@@%*+===*##*
+=++===+*#=*-*+=#+=*+=*#####*+++*#***=+**+=--------:::::::::::::-+**+==#***=+*##@%@@@@@@@@%%+=+*+=+*
++++=+=+*=*+#+**+==+*#*+***=++*#++#*#*###=--------=-------:::::::-=#*==*++**==+==+=++++**%%**%#*+*==
+++#+**#+++*+**##**####***++**+*=*#=*+###@+=====***++=-=++++=-:-:#***-*#+=*#=+----==++===-=**##%####
======+++*+**==++####*#####**###***+=****===*##%###*%::@+**##+#--==++=*###*#**+==-====*++=+++#%%#**#
**=-++=+-===+*+**==***##****####*##****+*=---=++*+++-:::-=+*+=-::*---*##*++**#*##%=+++++==+**++*++**
**+##++**==--=##**=*#+######*#####**#**++=-:*:----#=-:::-:--::::-:--**#=+*+++*#*+***+****#+=+#*#%%#*
*++*++*+*+=+=+=*=+=+**#**##%%%####*####-+===------+---:::=---:::::-:+###%%#*#%%%#==+++######++#%####
++++#*++*#######++=+=++*++*#%%##%%#####*+=+==---=++#%++#+=+=--------++#@%@@%%%%%%%***%%#****#==+%##*
++=*#%%******##%%###*++=+++**#####%%####*++++==+=-=**+*=+=-+*==----##=+*+%@@#+=#@%#*#%@%##**#*@+*###
#####%%%#****#%%%#####=##++*#*##**+#******=+++++=+*+#+*++==+++----#%##*+%@@#=-=+=**%%%%%@@%%####*%#*
*###**%%####%%%%%%%%%%##**+=++*#***#*#**+*+++=+#%%%%%*#*++=#+----=###%%#*=-+*+####=+####%%%%#**###%#
#####*+#####%%%@%#%%%%%%%#+##+++*###=++++##+++=+======-------==--=##%#%%%%#*+=+==-=+%#*%%########*##
**#####*####%%%%%%%%#####*###+%#+%#%+++#*##%****===+++*+=--==+=-+==*%%##%%@**#+++=====%@%%%#*#%#####
*%%#%**%*#####%%%%%@@%%%%%%%%@%%%%##**##****#%#**++====--=====-=+=-*-%####%@@%%+=+=+%+==-#%**###*##*
@@@%%@%##%%##%%%%%###%%%%%%%%%%%%%%****#**++**@%%#***++==+**+==*++=%+=##***#%%@@%#=+*+*%%%#*+#%%#*#*
%%%%@%####%###%%%%%#%##%%%#%%@@%%+***#***##++++@%%%%%%####*++=%*++-=++=###****#**#++=+==%####%%%####
%%%%%%%%@@%#%#%##%%%%%%#%%%%%%*=+***+*%#*#%##++=+#%%%##**+===###*=-=#+==%%#%*#%***+++**+-==*#%%%%%%%
@%%%%%%%%%%@@%%#@@@@@@@%%%=+*+*++****#*#**#%##%**==%%##*++==+%%+**++%#+=-*%%%%%*##*++=+#=#-+-+#%%@@@
%#####%%%@%%@@@@@@@@@*=*=+++**++*****####*#####*#**-==*++=====-=+-*=*#*+=====-%%%####*+*##***=+###%%
%%%######%%#%%@@@==+++**+**+**+*+++#*+#+*%++##%#+#%#*=-==*+==+==:---=%+++==+=+=--=##*#**#+@##++=+*=#
%%%%%##%#%%%%===+=+++++*++*+*+++**+*****+*%##*#@#*#***+==*#=-=====-=+=+++*+-=-=======-****+##%#*=-=+
%%#%%%##%#===++==+++=++++**++++*++*++#**+#**#*+*%@%*#+*#*##++=*=*==***=++=+=-+-+++=+====+##########+
###%%%%%#+**+=**+*+=++**+***#+++**+++***+**++#***#%@+#+#*#*+-+++==+%+=++==+==*-++*+++=+===-#%*@%##**
*###@%##+***==#**+++*+*+**+*=+**=+*+++****++**+###%%+#*=#%+*+=++++#*%+*+++=++-++=+*+*+=++-==%##**#*+
@%#**#%%+**#+++#*=*+*+=**#*=+=+=**==++++++**+-%+%%@*%#%**#+*-+++***=+%=++=--====+-+*+==++++=####%@%%
%##*#%@+*+#*##*+*#+******#*%%@%*%##@%+++**=#**+*+*@#%###***++=+*=*+=++-+*=====*#%%%+=++*+++=#%%%%%%#
@%%%%@#+#*##*##*##***+*+*+#%%@@@@@@@@@@@%%+=+++*+++*##*%###=+##**+*=*=+*%@@%%###++*+*+++***==%%%%**#
@@@@@%+*+**#*#*#**+***+#*#*#%%%%%@@@@@@@@@@@%#=*+*+*##%##%+*=#+++++#*%%%%%#%#***+==++=+**+*==%%%%##%
@##@@+***++**#*#+#**++**+****#*#***%%%@@@@@@@@@*+=+*++#%%##+#*#++*%#%%#######+**++*+=+*=++++==%%%@%%
%*%@++*#+####*##******#+++#+#*+++***####%%@@@@@@@%%=+**%%%%#**#*%#*****+*+=**#+++++**=*++***==%%@%%@
**#*++*+*#*#%**##+**#***#++*+++**#*+*+**##%##%%@@@@%%=++%%###+%##*#*#++++**+++==+==-+=*=+#=++==%%@@@
*##*++*##***#%####**++*+**#+#**+**+++*+*+++#*#%%%%%@@@%=+%++##%#*+****+=+++++=+++==*+++*+***+==%%@%%
*#+***#*#*#**#####*#**#+*+##*++++##**+******+*****###%@@@*####***#*+**++=#+*++**+==++++***+====*%@%%
#+#*###*+**#*#**#%%#*##**#+*#+##+**#*+*+*+***#*%#+**#*+%*****#+*+#*++**++%+++=**==+++++++*+++++=%%%%
++*+++**+**+**###%##*#**##+*+++****+*#+**+++++=*#**#*+***=-**+***++*+#*=+#++*+++++-=++=++-++*+++%%%%
**********###*+***#%##***##*#*###++*#*++***+****+***+*#%-%*=%%***#**+##*+*+-+++=+=+==++*+*++++=+=#%#
###*%%##%*##*****#**##**#######***#**++******=**+*+***%##%##+++*=+**###++*=++**+=+**+=+=*++==+==+%#%
***#***#***#+**#########*###*+##***++*+*+**#*++**+##+*%#==++*++*++++###++=*+++=*+*+**+++**+====+=#%%
***#**++++++****#%###%###*#%*##**#*+*##=++*****++***####=+++*#=+***+#+#*+=*+*++**+*+++*+*#**+-=+==+#
#*+**+*+++*+**##%#%%@%%%*%##%##*#*+*#+*+#***+**#*#+*####+++#=****++#**%*+++**++*+++*+++*@#%%*++====*
**++**#*#*#*#*#%%%%@@@#%###%#**#*###*****+*#**#***+#**#%*+#+*+**=****#%=+=+***=++*#==+*@%%%%#**=+==#
*+**##########*#%@@@@%####*##%*%*#*#*#+#*+####*#*#*****%=+****+++*#*#*%+++++#*+++*++=+@@@@%%#+++===*
***#%%%%%%**###%%%@@@%%%####%##**+#####***###*+**##+*##%+*#**+**##+*###++**+****+++=+@@@@@%%#***+===
##***#%####%*##%%@@@@%######+##**###*+*#*#**#*#***++*+#%*+*****+=#***#%+**+**++**==+=@@@@@#%##%#*#+=
%##*##*#%##*##%@@@@@%%###%#**#*###+#*#*#%#**#*#*#+****#%+**+*+++*#**+#*+++**+++*+**++@@@@@%#*####*#+
%%%%##=**%%###@@@@@%######*###%##########*#+#**#**#***#%++*+********##**=#**++**+++++@@@@%#**+++****
**%%##*#*###%##@@@@@%#*##%#*##*#*#**#%###*##*#****#***#%+****#*+*#****%##*#+*****++*+@@@@@@%##=+++==
+**#%#*##%%%%%%@@@@@%#####***####*##*##%******#*#*##*##*++***%*###*+*#+*#**+=*=**+*+=@@@@@%###*+++=+
**++*****+#%%%@@%%%%%############**#####**#%+##+#**#**#***%+****+*+#+***##***==+**++*@@@@@@@@@@%#+**
"#;
