use crate::input::{Input, MouseButton};
use crate::screen::Screen;
use crate::state_machine::State;
use rand::{thread_rng, Rng};
use crate::drawing::{draw_ascii, draw_ascii_safe, draw_question, draw_text_box};
use crate::input;
use crate::states::main_state::MainState;
use crate::states::transition_state::TransitionState;

pub struct Day24State {
    title_text: String,
}

impl Day24State {
    pub fn new() -> Self {
        let title_text = "Behold! Our Father Christmas!".to_string();
        Day24State { title_text }
    }
}

impl State for Day24State {
    fn enter(&mut self, screen: &mut Screen, input: &mut Input) {  }

    fn update(&mut self, screen: &mut Screen, input: &mut Input, dt: f64) -> Option<Box<dyn State>> {

        let h = screen.height() as i16;
        let w = screen.width() as i16;
        draw_ascii_safe(screen, FATHER_CHRISTMAS, w / 2 - WIDTH / 2, h / 2 - HEIGHT / 2);
        draw_text_box(
            screen,
            screen.width(),
            screen.height(),
            &self.title_text,
            0,
            10,
            (0, 0),
            false,
        );

        if input.is_key_up('q') {
            return Some(Box::new(TransitionState::new(Box::new(MainState::new()), None)));
        }

        None
    }

    fn exit(&mut self, screen: &mut Screen, input: &mut Input) {
    }
}

pub const WIDTH: i16 = 101;
pub const HEIGHT: i16 = 60;

pub const FATHER_CHRISTMAS: &str = r#"
%*++++=++#+-+==+====-=*####**+=+**+#*#%%#+*##%@@%###****+###***##%%%%%#%%%*#####%%#**##%#*##*#*+=+**
**+-===+=+##+#+-+++===***+********##**###++==+#%%%#*#%%#*+++*****#**%%%%##*=#%@@*+**##%%@@@%***%##*=
+=+++**++*+=**#%+=++==*==++==+#****#+=++*##*##**+=+==+==-==::=*+*#%%%%%%%##*=+*##**#***#%@@@@%#%%%%%
#+=-+*++*#@%##***+==+==++*+*+*+++**#####++++*--=-=+===+---------+***++*#%%#*##*++***+*%%**%%#***#%%%
##*#**++++***#####*+++===+=*+****+########*--*===*=---=-----::----+*==+***####***=+++***%#%%%***##*#
-====-+**########*++++=++#***+##*++*#%#*#=-::=++++*#*+-=-:=--::-::-++**==***#**######%#####%#%##****
+===++=+*#*###*+#++++####+*+**++++**+##:--+=++--*##%#*=*%#%**-:::--:=***#*###*##*##%%########%%#####
+=+=***+=**%#%#==++**++=++###**#=+++++=:-=+**#*:-+***+**#%#@%#+-::--=-##%*+*#####****#%#*#%%@@%%%@%%
*+*+++###*#####%%#####*+=#*++*=*==*=+==-+-##+--------======*#%#+-=+-=-+*+**#+##*####*+*##%%%@@%%@@##
=+*+#+*#++***#*#%##%%%%*+++==-+*#*##=--+=-=---::::::::::::::-+##=+-=--=#@%%#*%%%@@@%#***#%%%%%%%*==-
+*##**+*##**+*######%#@%#%#+***###*#===-*+-----::::::::::::::-=+#+++=-:++*+%@%%@@@@@%###%%%@%%%#=+*+
+***++**##**#%##*+*++*+***%%###*#%+#*=+++==------::::::::::::::-+*+=---=++***++#%@@@@%%@@@%*+===*##*
+=++===+*#=*-*+=#+=*+=*#####*+++*#***=+**+=--------:::::::::::::-+**+==#***=+*##@%@@@@@@@@%%+=+*+=+*
++++=+=+*=*+#+**+==+*#*+***=++*#++#*#*###=--------=-------:::::::-=#*==*++**==+==+=++++**%%**%#*+*==
+++#+**#+++*+**##**####***++**+*=*#=*+###@+=====***++=-=++++=-:-:#***-*#+=*#=+----==++===-=**##%####
======+++*+**==++####*#####**###***+=****===*##%###*%::@+**##+#--==++=*###*#**+==-====*++=+++#%%#**#
**=-++=+-===+*+**==***##****####*##****+*=---=++*+++-:::-=+*+=-::*---*##*++**#*##%=+++++==+**++*++**
**+##++**==--=##**=*#+######*#####**#**++=-:*:----#=-:::-:--::::-:--**#=+*+++*#*+***+****#+=+#*#%%#*
*++*++*+*+=+=+=*=+=+**#**##%%%####*####-+===------+---:::=---:::::-:+###%%#*#%%%#==+++######++#%####
++++#*++*#######++=+=++*++*#%%##%%#####*+=+==---=++#%++#+=+=--------++#@%@@%%%%%%%***%%#****#==+%##*
++=*#%%******##%%###*++=+++**#####%%####*++++==+=-=**+*=+=-+*==----##=+*+%@@#+=#@%#*#%@%##**#*@+*###
#####%%%#****#%%%#####=##++*#*##**+#******=+++++=+*+#+*++==+++----#%##*+%@@#=-=+=**%%%%%@@%%####*%#*
*###**%%####%%%%%%%%%%##**+=++*#***#*#**+*+++=+#%%%%%*#*++=#+----=###%%#*=-+*+####=+####%%%%#**###%#
#####*+#####%%%@%#%%%%%%%#+##+++*###=++++##+++=+======-------==--=##%#%%%%#*+=+==-=+%#*%%########*##
**#####*####%%%%%%%%#####*###+%#+%#%+++#*##%****===+++*+=--==+=-+==*%%##%%@**#+++=====%@%%%#*#%#####
*%%#%**%*#####%%%%%@@%%%%%%%%@%%%%##**##****#%#**++====--=====-=+=-*-%####%@@%%+=+=+%+==-#%**###*##*
@@@%%@%##%%##%%%%%###%%%%%%%%%%%%%%****#**++**@%%#***++==+**+==*++=%+=##***#%%@@%#=+*+*%%%#*+#%%#*#*
%%%%@%####%###%%%%%#%##%%%#%%@@%%+***#***##++++@%%%%%%####*++=%*++-=++=###****#**#++=+==%####%%%####
%%%%%%%%@@%#%#%##%%%%%%#%%%%%%*=+***+*%#*#%##++=+#%%%##**+===###*=-=#+==%%#%*#%***+++**+-==*#%%%%%%%
@%%%%%%%%%%@@%%#@@@@@@@%%%=+*+*++****#*#**#%##%**==%%##*++==+%%+**++%#+=-*%%%%%*##*++=+#=#-+-+#%%@@@
%#####%%%@%%@@@@@@@@@*=*=+++**++*****####*#####*#**-==*++=====-=+-*=*#*+=====-%%%####*+*##***=+###%%
%%%######%%#%%@@@==+++**+**+**+*+++#*+#+*%++##%#+#%#*=-==*+==+==:---=%+++==+=+=--=##*#**#+@##++=+*=#
%%%%%##%#%%%%===+=+++++*++*+*+++**+*****+*%##*#@#*#***+==*#=-=====-=+=+++*+-=-=======-****+##%#*=-=+
%%#%%%##%#===++==+++=++++**++++*++*++#**+#**#*+*%@%*#+*#*##++=*=*==***=++=+=-+-+++=+====+##########+
###%%%%%#+**+=**+*+=++**+***#+++**+++***+**++#***#%@+#+#*#*+-+++==+%+=++==+==*-++*+++=+===-#%*@%##**
*###@%##+***==#**+++*+*+**+*=+**=+*+++****++**+###%%+#*=#%+*+=++++#*%+*+++=++-++=+*+*+=++-==%##**#*+
@%#**#%%+**#+++#*=*+*+=**#*=+=+=**==++++++**+-%+%%@*%#%**#+*-+++***=+%=++=--====+-+*+==++++=####%@%%
%##*#%@+*+#*##*+*#+******#*%%@%*%##@%+++**=#**+*+*@#%###***++=+*=*+=++-+*=====*#%%%+=++*+++=#%%%%%%#
@%%%%@#+#*##*##*##***+*+*+#%%@@@@@@@@@@@%%+=+++*+++*##*%###=+##**+*=*=+*%@@%%###++*+*+++***==%%%%**#
@@@@@%+*+**#*#*#**+***+#*#*#%%%%%@@@@@@@@@@@%#=*+*+*##%##%+*=#+++++#*%%%%%#%#***+==++=+**+*==%%%%##%
@##@@+***++**#*#+#**++**+****#*#***%%%@@@@@@@@@*+=+*++#%%##+#*#++*%#%%#######+**++*+=+*=++++==%%%@%%
%*%@++*#+####*##******#+++#+#*+++***####%%@@@@@@@%%=+**%%%%#**#*%#*****+*+=**#+++++**=*++***==%%@%%@
**#*++*+*#*#%**##+**#***#++*+++**#*+*+**##%##%%@@@@%%=++%%###+%##*#*#++++**+++==+==-+=*=+#=++==%%@@@
*##*++*##***#%####**++*+**#+#**+**+++*+*+++#*#%%%%%@@@%=+%++##%#*+****+=+++++=+++==*+++*+***+==%%@%%
*#+***#*#*#**#####*#**#+*+##*++++##**+******+*****###%@@@*####***#*+**++=#+*++**+==++++***+====*%@%%
#+#*###*+**#*#**#%%#*##**#+*#+##+**#*+*+*+***#*%#+**#*+%*****#+*+#*++**++%+++=**==+++++++*+++++=%%%%
++*+++**+**+**###%##*#**##+*+++****+*#+**+++++=*#**#*+***=-**+***++*+#*=+#++*+++++-=++=++-++*+++%%%%
**********###*+***#%##***##*#*###++*#*++***+****+***+*#%-%*=%%***#**+##*+*+-+++=+=+==++*+*++++=+=#%#
###*%%##%*##*****#**##**#######***#**++******=**+*+***%##%##+++*=+**###++*=++**+=+**+=+=*++==+==+%#%
***#***#***#+**#########*###*+##***++*+*+**#*++**+##+*%#==++*++*++++###++=*+++=*+*+**+++**+====+=#%%
***#**++++++****#%###%###*#%*##**#*+*##=++*****++***####=+++*#=+***+#+#*+=*+*++**+*+++*+*#**+-=+==+#
#*+**+*+++*+**##%#%%@%%%*%##%##*#*+*#+*+#***+**#*#+*####+++#=****++#**%*+++**++*+++*+++*@#%%*++====*
**++**#*#*#*#*#%%%%@@@#%###%#**#*###*****+*#**#***+#**#%*+#+*+**=****#%=+=+***=++*#==+*@%%%%#**=+==#
*+**##########*#%@@@@%####*##%*%*#*#*#+#*+####*#*#*****%=+****+++*#*#*%+++++#*+++*++=+@@@@%%#+++===*
***#%%%%%%**###%%%@@@%%%####%##**+#####***###*+**##+*##%+*#**+**##+*###++**+****+++=+@@@@@%%#***+===
##***#%####%*##%%@@@@%######+##**###*+*#*#**#*#***++*+#%*+*****+=#***#%+**+**++**==+=@@@@@#%##%#*#+=
%##*##*#%##*##%@@@@@%%###%#**#*###+#*#*#%#**#*#*#+****#%+**+*+++*#**+#*+++**+++*+**++@@@@@%#*####*#+
%%%%##=**%%###@@@@@%######*###%##########*#+#**#**#***#%++*+********##**=#**++**+++++@@@@%#**+++****
**%%##*#*###%##@@@@@%#*##%#*##*#*#**#%###*##*#****#***#%+****#*+*#****%##*#+*****++*+@@@@@@%##=+++==
+**#%#*##%%%%%%@@@@@%#####***####*##*##%******#*#*##*##*++***%*###*+*#+*#**+=*=**+*+=@@@@@%###*+++=+
**++*****+#%%%@@%%%%%############**#####**#%+##+#**#**#***%+****+*+#+***##***==+**++*@@@@@@@@@@%#+**
"#;
